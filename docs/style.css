:root {
  --fg:#eaeaea; --muted:#bdbdbd;
  --accent:#00ffff; --accent2:#ff00ff;
  --flickerDur:4.8s;
}

/* ベース背景 */
html,body {height:100%;margin:0;}
body {
  color:var(--fg);
  font-family:"Helvetica Neue","Noto Sans JP",system-ui,sans-serif;
  text-align:center; overflow-x:hidden;
  background:#000 url("wall_texture.webp") center/cover fixed no-repeat;
}
body::before {
  content:"";position:fixed;inset:0;z-index:-2;
  background:
    radial-gradient(ellipse at 50% 20%, rgba(0,0,0,.25) 0%, rgba(0,0,0,.6) 60%, rgba(0,0,0,.85) 100%),
    rgba(0,0,0,.95);
}
body::after {
  content:"";position:fixed;inset:0;z-index:-1;
  background:repeating-linear-gradient(0deg,rgba(255,255,255,.015) 0 1px,transparent 1px 3px);
  mix-blend-mode:overlay;pointer-events:none;
}

/* 蛍光灯 */
.alley-lamp::before {
  content:"";
  position:absolute;
  left:50%;
  top:16px;
  transform:translateX(-50%);
  width:100%;
  height:16px;
  border-radius:10px;
  background:
    /* 中心の白い発光部分 */
    linear-gradient(90deg,
      #222 0%,
      #ececec 12%,
      #ffffff 50%,
      #ececec 88%,
      #222 100%
    ),
    /* 管の反射（金属っぽい筋） */
    linear-gradient(0deg,
      rgba(255,255,255,.6) 0%,
      rgba(255,255,255,.15) 40%,
      rgba(0,0,0,.15) 60%,
      rgba(255,255,255,.25) 100%
    );
  background-blend-mode:screen;
  box-shadow:
    0 0 4px rgba(255,255,255,.6),
    0 0 18px rgba(255,255,255,.4),
    0 0 38px rgba(255,255,240,.3);
  filter:blur(1.5px) brightness(.95);
  opacity:.9;
  mix-blend-mode:screen;
  animation:flickerOpacity var(--flickerDur) infinite steps(1,end);
}

.alley-lamp::after {
  content:"";
  position:absolute;
  left:50%;
  top:24px;
  transform:translateX(-50%);
  width:180%;
  height:90vh;
  background:
    radial-gradient(
      ellipse at 50% 0%,
      rgba(255,0,200,.35) 0%,
      rgba(180,0,255,.2) 40%,
      transparent 75%
    ),
    radial-gradient(
      ellipse at 50% 0%,
      rgba(0,200,255,.35) 0%,
      rgba(0,140,255,.2) 40%,
      transparent 75%
    );
  clip-path: polygon(0% 0%, 100% 0%, 85% 100%, 15% 100%);
  mix-blend-mode: screen;
  filter: blur(32px);
  opacity: .95;
  animation: flickerOpacity var(--flickerDur) infinite steps(1,end);

  max-width: 140vw;   /* ← この行を追加 */
}

@keyframes flickerOpacity {
  0%,7%{opacity:.03}
  8%,12%{opacity:.65}
  13%,16%{opacity:.18}
  17%,24%{opacity:.55}
  25%,28%{opacity:.12}
  29%,100%{opacity:.45}
}

/* ロゴ */
header {padding:16px 16px 10px;position:relative;}
.logo-text {
  display:inline-block;
  margin-top:68px; /* ← 位置：少し下げる（60〜80pxで微調整） */
  font-family:"Bebas Neue","Share Tech Mono",Impact,sans-serif;
  font-weight:800;
  letter-spacing:.14em;
  font-size:clamp(46px,8.5vw,96px);
  line-height:1;
  color:#f5f5f5;
  filter:contrast(1.05) brightness(1.03)
          drop-shadow(0 -6px 18px rgba(255,255,240,.25)) /* ← 上からの光 */
          drop-shadow(0 0 10px rgba(0,255,255,.25));     /* ← 蛍光の反射 */
  text-shadow:
    0 0 2px rgba(255,255,255,.6),
    0 0 10px rgba(255,255,255,.5),
    0 0 24px rgba(0,255,255,.25);
  animation:flickerGlow var(--flickerDur) steps(1,end) infinite,
             logoGlowBase 3.2s ease-in-out infinite;
}
.logo-text, .link-button {
  position:relative;
  z-index:2;
}

@keyframes flickerGlow {
  0%,7% {text-shadow:0 0 3px rgba(0,255,255,.3);}
  8%,12% {text-shadow:0 0 8px rgba(0,255,255,.9);}
  13%,16% {text-shadow:0 0 5px rgba(0,255,255,.5);}
  17%,24% {text-shadow:0 0 8px rgba(0,255,255,.85);}
  25%,28% {text-shadow:0 0 4px rgba(0,255,255,.4);}
  29%,100% {text-shadow:0 0 6px rgba(0,255,255,.7);}
}
@keyframes logoGlowBase {0%,100%{transform:none}50%{transform:translateY(-1px)}}

/* コピー */
.brand-copy {margin-top:10px;font-size:1rem;line-height:1.9;}
.brand-copy .jp {opacity:0;animation:fadeIn 1.4s ease forwards .4s;color:#e8e8e8;}
.brand-copy .en {opacity:0;animation:fadeIn 1.4s ease forwards 2.1s;color:var(--accent);}
@keyframes fadeIn {to{opacity:1}}

/* ボタン */
.link-button {
  display:inline-block;margin:18px 6px 6px;padding:12px 28px;
  color:#000;background:var(--accent);border-radius:8px;font-weight:800;text-decoration:none;
}
.link-button:hover {background:var(--accent2);color:#fff;}
.hashtags {margin-top:10px;color:var(--muted);font-size:.92rem;}

/* ギャラリー */
section.gallery {margin:66px 0 56px;}
.scroll-container {
  display:flex;
  gap:20px;
  overflow-x:auto;
  padding:18px 24px;
  scroll-snap-type:x mandatory;
  justify-content:center;        /* 中央寄せ */
  scroll-padding-left:24px;      /* スクロール開始位置の余白 */
}
.card {flex:0 0 auto;width:260px;height:340px;position:relative;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:10px;}
.card img {width:100%;height:100%;object-fit:cover;}
.card.empty {display:flex;align-items:center;justify-content:center;border:1px dashed rgba(255,255,255,.2);}
.card.empty .soon {color:#fff;opacity:.5;}

/* ===== ギャラリータイトル（穏やかネオン） ===== */
#gtitle {
  font-family:"Orbitron","Share Tech Mono",system-ui,sans-serif;
  font-size:1.4rem;
  letter-spacing:0.25em;
  color:#b8ffff;
  text-align:center;
  text-shadow:
    0 0 6px rgba(0,255,255,.45),
    0 0 14px rgba(0,255,255,.3),
    0 0 26px rgba(0,255,255,.15);
  margin-bottom:26px;
}

#gtitle span {
  display:inline-block;
  animation:neonPulse 7s ease-in-out infinite;
}

@keyframes neonPulse {
  0%, 100% {
    opacity:1;
    text-shadow:
      0 0 6px rgba(0,255,255,.4),
      0 0 14px rgba(0,255,255,.25),
      0 0 24px rgba(0,255,255,.1);
  }
  50% {
    opacity:.85;
    text-shadow:
      0 0 8px rgba(0,255,255,.6),
      0 0 18px rgba(0,255,255,.4),
      0 0 32px rgba(0,255,255,.25);
  }
}


/* ホバーで微妙に光が走る */
#gtitle:hover {
  color:#fff;
  text-shadow:
    0 0 10px rgba(0,255,255,.8),
    0 0 22px rgba(0,255,255,.5),
    0 0 44px rgba(0,255,255,.25);
}


/* モーダル */
.modal {display:none;position:fixed;z-index:100;inset:0;background:rgba(0,0,0,.85);backdrop-filter:blur(4px);}
.modal-content {background:rgba(20,20,20,.8);border-radius:12px;max-width:600px;margin:8% auto;padding:30px;color:#fff;}
.close {position:absolute;right:20px;top:10px;font-size:32px;color:#fff;cursor:pointer;}
.modal input,.modal textarea {width:100%;margin:8px 0;padding:12px 14px;background:rgba(255,255,255,0.08);color:#fff;}
.modal button {margin-top:16px;padding:12px 24px;background:var(--accent);border:none;border-radius:8px;color:#000;font-weight:700;cursor:pointer;}
.modal button:hover {background:var(--accent2);color:#fff;}

/* Thank you */
.thankyou {position:fixed;inset:0;z-index:200;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.92);font-size:2rem;color:var(--accent);opacity:0;visibility:hidden;}
.thankyou.show {opacity:1;visibility:visible;}
footer {margin:64px 0 26px;color:#9a9a9a;font-size:.95rem;}

/* ===== クレジット（控えめに出現） ===== */
.credit{
  position:relative;
  max-width:920px;
  margin:64px auto 42px;
  padding-top:22px;
  text-align:center;
  color:#9bb; /* くすんだシアン */
  letter-spacing:.08em;
  line-height:1.65;
  opacity:.85;
}
.credit::before{
  /* 細い罫線（薄く滲む） */
  content:"";
  position:absolute; left:50%; top:0; transform:translateX(-50%);
  width:220px; height:1px;
  background:linear-gradient(90deg,transparent,rgba(160,255,255,.25),transparent);
  filter:blur(.2px);
}
.credit .label{
  font-size:.78rem;
  color:#8abcbc;
  text-transform:uppercase;
}
.credit .by{
  font-size:.9rem;
  color:#cfe;
}
.credit strong{
  color:#def; font-weight:700;
  text-shadow:0 0 6px rgba(0,255,255,.18);
}

/* 出現アニメ（スクロールで） */
.reveal {
  opacity: 0;
  transform: translateY(10px);
  filter: blur(2px);
  transition: opacity 0.7s ease, transform 0.7s ease, filter 0.7s ease;
}

.reveal.show {
  opacity: 1;
  transform: none;
  filter: none;
}


/* 触れた時だけ微光（PCのみ） */
@media (hover:hover){
  .credit:hover strong{ text-shadow:0 0 10px rgba(0,255,255,.28); }
}

/* モーション控えめユーザー配慮 */
@media (prefers-reduced-motion: reduce){
  .reveal, .reveal.show{ transition:none; transform:none; filter:none; }
}


/* ========= ランダム暗転（blackout状態） ========= */
body.blackout::before {
  backdrop-filter:brightness(.3) blur(1px);
  background:rgba(0,0,0,.6);
}


body.blackout .alley-lamp::before,
body.blackout .alley-lamp::after{
  opacity:0.02 !important;
  transition:opacity .1s ease;
}
body.blackout .logo-text{
  opacity:.08;
  text-shadow:none;
  filter:none;
  transition:opacity .1s ease;
}
.card {
  position:relative;
  overflow:hidden;
}

.card .concept {
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,.75);
  color:#f2f2f2;
  font-size:.9rem;
  line-height:1.6;
  opacity:0;
  transform:translateY(10%);
  transition:opacity .4s ease, transform .4s ease;
  padding:20px;
  text-shadow:0 0 6px rgba(0,255,255,.3);
}

.card:hover .concept {
  opacity:1;
  transform:translateY(0);
}
/* ===== バースト用（不規則に弾ける） ===== */
@keyframes surgeBurstOpacity {
  /* ランプの明滅：0/1を不規則に叩く */
  0%   { opacity:.15 }
  6%   { opacity:1 }
  12%  { opacity:.25 }
  18%  { opacity:1 }
  24%  { opacity:.2 }
  30%  { opacity:1 }
  36%  { opacity:.1 }
  45%  { opacity:1 }
  55%  { opacity:.3 }
  65%  { opacity:1 }
  78%  { opacity:.18 }
  88%  { opacity:1 }
  100% { opacity:.6 }
}

@keyframes surgeBurstGlow {
  /* ロゴの発光：一瞬ビカ→すぐ減衰→またビカ… */
  0%{
    text-shadow:
      0 0 6px rgba(0,255,255,.5),
      0 0 14px rgba(0,255,255,.35),
      0 0 26px rgba(0,255,255,.2);
  }
  6%{
    text-shadow:
      0 0 10px rgba(0,255,255,1),
      0 0 24px rgba(0,255,255,.8),
      0 0 40px rgba(0,255,255,.45);
  }
  12%{
    text-shadow:
      0 0 5px rgba(0,255,255,.35),
      0 0 12px rgba(0,255,255,.25),
      0 0 20px rgba(0,255,255,.15);
  }
  18%{
    text-shadow:
      0 0 9px rgba(0,255,255,.9),
      0 0 22px rgba(0,255,255,.6),
      0 0 36px rgba(0,255,255,.35);
  }
  30%{
    text-shadow:
      0 0 4px rgba(0,255,255,.3),
      0 0 10px rgba(0,255,255,.2),
      0 0 18px rgba(0,255,255,.12);
  }
  45%{
    text-shadow:
      0 0 9px rgba(0,255,255,.95),
      0 0 22px rgba(0,255,255,.7),
      0 0 40px rgba(0,255,255,.4);
  }
  65%{
    text-shadow:
      0 0 5px rgba(0,255,255,.35),
      0 0 12px rgba(0,255,255,.25),
      0 0 20px rgba(0,255,255,.14);
  }
  88%{
    text-shadow:
      0 0 8px rgba(0,255,255,.85),
      0 0 20px rgba(0,255,255,.55),
      0 0 34px rgba(0,255,255,.3);
  }
  100%{
    text-shadow:
      0 0 6px rgba(0,255,255,.55),
      0 0 16px rgba(0,255,255,.35),
      0 0 28px rgba(0,255,255,.2);
  }
}

/* === バースト中だけ通常アニメを上書き（0.9秒だけ） === */
.surge .alley-lamp::before,
.surge .alley-lamp::after{
  animation: surgeBurstOpacity 0.9s steps(1,end) 1 !important;
}

.surge .logo-text{
  /* 呼吸は残したまま、明滅だけバースト波形に差し替え */
  animation:
    surgeBurstGlow 0.9s steps(1,end) 1,
    logoGlowBase 3.2s ease-in-out infinite !important;
}

/* ===== スマホ向けフォーム：強制ワイド＆タップ優先 ===== */
@media (max-width: 768px){

  /* 画面全体で中央寄せ＆裏スクロール禁止と相性よく */
  .modal{
    display:flex;
    align-items:center;
    justify-content:center;
    padding:env(safe-area-inset-top) 0 env(safe-area-inset-bottom);
    background:rgba(0,0,0,.92);
  }

  /* 端末幅いっぱい＆縦ははみ出さないようスクロール */
  .modal-content{
    width:94vw;
    max-width:none;
    max-height:95vh;
    overflow:auto;
    margin:0;
    padding:20px 16px;
    border-radius:14px;
    box-shadow:0 8px 40px rgba(0,0,0,.6);
    -webkit-overflow-scrolling: touch;
  }

  .modal-content h2{
    font-size:1.2rem;
    letter-spacing:.08em;
    margin:0 0 12px;
  }

  .modal input,
  .modal textarea{
    font-size:16px;    /* iOSズーム防止ライン */
    line-height:1.5;
    padding:14px 14px;
    border-radius:12px;
    border:1px solid rgba(255,255,255,.2);
    background:rgba(255,255,255,.08);
    color:#fff;
    width:100%;
  }
  .modal textarea{ min-height:160px; }

  .modal button{
    display:block;
    width:100%;
    padding:15px 16px;
    font-size:16px;
    border-radius:12px;
    margin-top:14px;
  }

  /* 閉じるボタンを親指サイズに */
  .close{
    position:sticky;  /* スクロールしても押しやすい位置に留まる */
    top:0; right:0;
    margin-left:auto;
    width:42px; height:42px;
    line-height:42px;
    border-radius:10px;
    background:rgba(255,255,255,.10);
  }
  .close:active{ background:rgba(255,255,255,.18); }
}
body.modal-open { overflow:hidden; }
/* ====== スマホ最適化 一式（末尾にそのまま貼ればOK） ====== */

/* モーダルを開いた時に裏スクロールを止める（グローバル） */
body.modal-open { overflow: hidden; }

/* キーボード操作の見やすさ（共通） */
.modal input:focus-visible,
.modal textarea:focus-visible,
.modal button:focus-visible{
  outline:2px solid rgba(0,255,255,.7);
  outline-offset:2px;
  border-radius:10px;
}

/* ===== スマホ向け全体レイアウト ===== */
@media (max-width: 768px){

  body { font-size: 15px; line-height: 1.6; }

  header { padding: 20px 10px; }

  .logo-text{
    font-size: clamp(40px, 12vw, 72px);
    letter-spacing: .1em;
    margin-top: 68px; /* 光に照らされる感じをキープ */
  }

  .brand-copy{
    font-size: .9rem;
    line-height: 1.6;
    padding: 0 10px;
  }

  .link-button{
    display:block;
    width: 84%;
    margin: 10px auto;
    padding: 13px 16px;
    font-size: 16px; /* iOSズーム防止 */
  }

  section.gallery { margin: 40px 0; }

  .scroll-container{
    gap: 14px;
    padding: 0 10px;
  }

  .card{
    width: 75vw;
    height: 280px;
  }

  .card .concept{
    font-size: .85rem;
    padding: 10px;
  }

  footer{
    font-size: .8rem;
    margin: 40px 0 60px;
  }

  /* ===== モーダル（お問い合わせ）強化 ===== */

  /* 画面全体で中央寄せ。裏が動かないよう黒幕も強め */
  .modal{
    display:flex;
    align-items:center;
    justify-content:center;
    padding: env(safe-area-inset-top) 0 env(safe-area-inset-bottom);
    background: rgba(0,0,0,.98);
  }

  /* 端から端まで広げ、縦は画面の86%までにして中だけスクロール */
  .modal-content{
    width: 94vw;
    max-width: none;
    max-height: 86vh;            /* ← ここを変えれば縦の占有率を調整できる */
    overflow: auto;
    margin: 0;
    padding: 20px 16px;
    border-radius: 14px;
    box-shadow: 0 8px 40px rgba(0,0,0,.6);
    -webkit-overflow-scrolling: touch; /* iOS慣性 */
    padding-left: calc(16px + env(safe-area-inset-left));
    padding-right: calc(16px + env(safe-area-inset-right));
  }

  .modal-content h2{
    font-size: 1.2rem;
    letter-spacing: .08em;
    margin: 0 0 12px;
  }

  .modal input,
  .modal textarea{
    font-size: 16px;          /* iOSの自動ズーム回避ライン */
    line-height: 1.5;
    padding: 14px 14px;
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,.2);
    background: rgba(255,255,255,.08);
    color: #fff;
    width: 100%;
    margin: 8px 0;
    outline: none;
  }

  .modal input::placeholder,
  .modal textarea::placeholder{
    color: rgba(255,255,255,.55);
  }

  .modal input:focus,
  .modal textarea:focus{
    border-color: rgba(0,255,255,.6);
    box-shadow: 0 0 0 3px rgba(0,255,255,.15);
    background: rgba(255,255,255,.10);
  }

  .modal textarea{
    min-height: 160px;
    resize: vertical;
  }

  .modal button{
    display:block;
    width: 100%;
    padding: 15px 16px;
    font-size: 16px;
    border-radius: 12px;
    margin-top: 14px;
  }

  /* 閉じるボタン：親指で押しやすいサイズ。スクロールしても上に残す */
  .close{
    position: sticky;
    top: 0; right: 0;
    margin-left: auto;
    width: 42px; height: 42px;
    line-height: 42px;
    text-align: center;
    border-radius: 10px;
    background: rgba(255,255,255,.10);
    -webkit-tap-highlight-color: transparent;
  }
  .close:active{ background: rgba(255,255,255,.18); }
}
/* ===== 横スクロール完全オフ（スマホ） ===== */
@media (max-width: 768px){

  /* 念のための保険 */
  html, body { overflow-x: hidden; }

  /* 蛍光の台形レイヤーが横に溢れにくいように */
  .alley-lamp{ overflow:hidden; }

  /* ギャラリー：横スワイプをやめて縦並びに */
  .scroll-container{
    display:flex;
    flex-wrap: wrap;          /* ← 縦積み */
    overflow-x: hidden;       /* ← 横スクロール殺す */
    gap: 16px;
    padding: 0 12px;
    justify-content: center;
  }
  .card{
    width: 100%;
    max-width: 520px;         /* 端末幅に合わせて中央寄せ */
    height: auto;             /* 高さ自動 */
    aspect-ratio: 4/5;        /* 画像比率が極端なら外してOK */
    margin: 0 auto;
  }
  .card img{
    width:100%;
    height:100%;
    object-fit: cover;
    display:block;            /* 画像のはみ出し防止 */
  }

  /* ギャラリータイトルの余白を少し詰める */
  section.gallery{ margin: 32px 0 40px; }
  #gtitle{ margin: 0 0 18px; }

  /* ついでにボタンも折り返し前提で中央寄せ */
  .link-button{ width: 86%; }
}
/* ===== スマホの最終微調整 ===== */
@media (max-width: 768px){

  /* ギャラリーのカードを少し小さめに */
  .card{
    width: 88vw;          /* 画面幅の約9割 */
    max-width: 380px;     /* 大きい端末でもこれ以上広がらない */
    height: auto;
    aspect-ratio: 3 / 4;  /* 縦長比率 */
    margin: 0 auto;
    border-radius: 12px;
  }
  .card img{
    border-radius: 12px;
  }

  .card .concept{
    font-size: 0.8rem;
    padding: 12px;
    line-height: 1.5;
  }

  /* 見出しの余白を調整 */
  #gtitle{
    font-size: 1.1rem;
    letter-spacing: 0.15em;
    margin-bottom: 16px;
  }

  /* お問い合わせフォームをややコンパクトに */
  .modal-content{
    max-height: 75vh;      /* ← 縦方向の制限を少しきつめに */
    padding: 18px 14px;
  }

  .modal textarea{
    min-height: 120px;     /* ← 入力欄の縦を少し低く */
  }

  .modal button{
    padding: 12px 14px;
    font-size: 15px;
  }

  /* 閉じるボタンの押しやすさ維持 */
  .close{
    width: 38px;
    height: 38px;
    line-height: 38px;
  }
}
/* ===== 横スクロール根絶パッチ（スマホ優先だがPCにも安全） ===== */

/* まず全体を安全化 */
*,
*::before,
*::after{ box-sizing: border-box; }

html, body{
  overflow-x: hidden !important;   /* ← 最終ゲート */
  width: 100%;
}

/* 画像・動画は親からはみ出さない */
img, video{
  max-width: 100%;
  height: auto;
  display: block;
}

/* 蛍光レイヤーのはみ出しを物理的にカット */
.alley-lamp{
  position: relative;
  max-width: 100vw;
  margin-left: auto;
  margin-right: auto;
  overflow: hidden;                 /* ← ここが効く */
}

/* 光の広がりが画面外を押さないよう幅を制限（モバイルで強め） */
@media (max-width: 768px){
  .alley-lamp::after{
    width: 140vw;                   /* 180% → 少し抑える */
    max-width: 140vw;               /* 念のため */
    left: 50%;
    transform: translateX(-50%);
  }
}

/* ギャラリーを縦積みにして横スクロールを禁止 */
@media (max-width: 768px){
  .scroll-container{
    display: flex;
    flex-wrap: wrap;                /* 横並び→縦積み */
    overflow-x: hidden;
    gap: 16px;
    padding: 0 12px;
    justify-content: center;
  }
  .card{
    width: 86vw;
    max-width: 380px;
    margin: 0 auto;
  }
}

/* フォーム周りで横に広がりうる要素を抑える */
.modal{
  overflow-x: hidden;               /* モーダル自体の横は切る */
}
@media (max-width: 768px){
  .modal-content{
    width: 94vw;                    /* 100vwはスクロールバー分が乗る端末あり */
    max-width: 94vw;                /* 二重保険 */
    margin-left: auto;
    margin-right: auto;
    overflow-x: hidden;
  }
  .close{
    max-width: 100%;
  }
}

/* フッター下の確保用ダミーが横を押さないように */
footer::after{
  width: 100%;
  max-width: 100%;
  display: block;
  overflow: hidden;
}

/* たまに文字のはみ出しで発生するケースの保険 */
.hashtags, #gtitle, .brand-copy, .card-title, .concept, footer{
  overflow-wrap: anywhere;
}
